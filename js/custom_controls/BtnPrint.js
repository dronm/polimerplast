/* Copyright (c) 2014	Andrey Mikhalevich, Katren ltd.*//*		Description*///ф/** Requirements*//* constructor */function BtnPrint(options){		var id = uuid();	options.caption = "Печать";	options.attrs={"title":"распечатать заявку (для склада)"};	options.onClick = function(){		var keys = options.grid.getSelectedNodeKeys();		if (keys){			//this.setEnabled(false);			var self = this;			var contr = new DOCOrder_Controller(new ServConnector(HOST_NAME));			contr.run("get_print",{				"async":true,				"xml":false,				"params":{"doc_id":keys["id"], "v":"DOCOrder"},				"func":function(resp){										//self.setEnabled(true);					WindowPrint.show({"content":resp,"print": true});										//none graphic attachments					contr.run("get_nonegraphic_files_list",{						"async":true,						"params":{"doc_order_id": keys["id"], "v":"ViewXML"},						"func":function(resp){							var att_m = resp.getModelById("FileList_Model", true);							var offset = 0;							var h = $( window ).width()/3*2;							var left = $( window ).width()/2;							var w = left - 20;														while(att_m.getNextRow()){								var file_inf = CommonHelper.unserialize(att_m.getFieldValue("file_inf"));																contr.getServConnector().openHref({										"c":"DOCOrder_Controller",										"f": "get_file",										"inline":"1",										"doc_order_id":keys["id"],										"file_id": file_inf.id									},									"location=0,menubar=0,status=0,titlebar=0,top="+(50+offset)+",left="+(left+offset)+",width="+w+",height="+h								);								offset = offset + 100;							}						}					});				},				"cont":this,				"errControl":options.grid.getErrorControl()			});		}	};		BtnPrint.superclass.constructor.call(this,		id,options);}extend(BtnPrint,Button);